# 墨墨分享自动化（改进版）

## 功能特性

- ✅ **每日多次执行** - 每天4次自动执行（6:30、12:30、18:30、0:30）
- ✅ **代理验证** - 自动验证代理IP有效性，提高成功率
- ✅ **并发控制** - 合理的并发请求限制，避免被封禁
- ✅ **错误处理** - 完善的异常处理和日志记录
- ✅ **配置管理** - 集中式配置管理，易于维护
- ✅ **调试模式** - 支持调试模式，便于问题排查
- ✅ **缓存优化** - 依赖缓存，提高执行效率

## 快速开始

### 1. Fork项目
点击右上角的"Fork"按钮，将项目fork到自己的GitHub账户。

### 2. 配置Secrets
在GitHub仓库的Settings > Secrets and variables > Actions中添加：
- `MOMO_LINK`: 你的墨墨分享链接
- `GITHUB_TOKEN`: 自动创建，无需手动设置

### 3. 启用Actions
进入Actions标签页，启用GitHub Actions。

### 4. 手动触发
可以通过以下方式手动触发：
- 进入Actions页面，选择"Momo Share Automation"
- 点击"Run workflow"按钮
- 可选设置代理数量（默认50个）

## 配置说明

### 环境变量
| 变量名 | 说明 | 默认值 |
|--------|------|--------|
| `MOMO_LINK` | 墨墨分享链接 | 必填 |
| `MAX_PROXY_COUNT` | 最大代理数量 | 50 |
| `DEBUG_MODE` | 调试模式 | false |

### 定时任务
- **北京时间**: 每天6:30、12:30、18:30、0:30
- **UTC时间**: 22:30、4:30、10:30、16:30

## 文件结构

```
auto-momo/
├── config.py              # 配置管理
├── proxy_validator.py     # 代理验证器
├── improved_ip.py         # 改进的代理收集器
├── improved_momo.py       # 改进的墨墨分享器
├── requirements.txt       # 依赖列表
└── README_improved.md     # 改进版说明
```

## 技术改进

### 1. 代码质量
- **模块化设计**: 功能分离，易于维护
- **类型注解**: 完整的类型提示
- **日志系统**: 结构化日志记录
- **异常处理**: 完善的错误处理机制

### 2. 性能优化
- **并发控制**: 限制并发请求数量
- **代理验证**: 使用前验证代理有效性
- **缓存机制**: 依赖缓存加速执行
- **连接复用**: HTTP连接池复用

### 3. 安全性
- **环境变量**: 敏感信息通过环境变量管理
- **请求限制**: 避免过于频繁的请求
- **用户代理轮换**: 降低被识别风险

## 监控与调试

### 查看执行结果
1. 进入GitHub仓库的Actions页面
2. 选择最新的workflow运行
3. 查看"Working"步骤的日志输出

### 调试模式
手动触发workflow时，可以启用调试模式获取更详细的日志。

### 日志下载
每次执行都会生成日志文件，可以在Artifacts中下载查看。

## 故障排除

### 常见问题

**Q: 执行失败怎么办？**
A: 检查Secrets是否正确配置，查看Actions日志获取详细错误信息。

**Q: 代理数量太少？**
A: 调整`MAX_PROXY_COUNT`环境变量，或检查网络连接。

**Q: 分享次数不理想？**
A: 代理质量可能较低，可以尝试在不同时间段执行。

## 更新日志

### v2.0.0
- 完全重构代码结构
- 增加代理验证功能
- 改进错误处理机制
- 优化执行频率
- 添加调试模式
- 完善文档说明

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 许可证

MIT License